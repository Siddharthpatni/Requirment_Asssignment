stateDiagram-v2
    [*] --> Idle
    
    Idle --> Browsing: Open App
    Browsing --> Claimed: Select Scooter
    Browsing --> Idle: Exit App
    
    Claimed --> Active: Unlock via BT/QR
    Claimed --> ClaimExpired: 7 min timeout
    ClaimExpired --> Browsing: Try Again
    
    Active --> Concluding: End Ride
    Active --> DeviceOffline: Network Lost
    DeviceOffline --> Active: Reconnect
    
    Concluding --> Settling: Lock Engaged
    Settling --> Complete: Payment OK
    Settling --> PaymentHold: Auth Failed
    
    PaymentHold --> Settling: Alternate Card
    PaymentHold --> Suspended: 72h Grace Expired
    
    Complete --> Idle: New Session
    Suspended --> [*]
